# Video Upscaler 常见问题解答 (FAQ)

## 快速导航

- [性能相关](#性能相关)
- [功能相关](#功能相关)
- [技术相关](#技术相关)
- [故障相关](#故障相关)
- [授权相关](#授权相关)

---

## 性能相关

### Q: 为什么处理速度这么慢？

**A**: 处理速度取决于多个因素：
- **显卡性能**: RTX 3060 比 GTX 1060 快 3-5 倍
- **视频分辨率**: 4K 处理比 1080p 慢 4 倍
- **补帧**: 启用补帧会增加约 50-100% 的处理时间
- **视频时长**: 长时间视频需要更多处理时间

**优化建议**:
- 关闭不必要的程序
- 确保显卡驱动是最新的
- 选择适合硬件的档位
- 避免同时处理多个视频

### Q: 会占用多少显存？

**A**: 不同档位的显存需求：

| 档位 | 超分显存 | 补帧显存 | 总计 |
|------|---------|---------|------|
| 流畅 | ~1.5GB | ~0.5GB | ~2GB |
| 标准 | ~3GB | ~1GB | ~4GB |
| 高清 | ~4.5GB | ~1.5GB | ~6GB |

如果显存不足，程序会自动减小 tile 大小或报错。

### Q: CPU 占用高正常吗？

**A**: 正常。视频处理是计算密集型任务：
- **解码/编码**: 使用 CPU
- **超分**: 主要使用 GPU，但 CPU 参与预处理
- **补帧**: 主要使用 GPU

建议：
- 处理时不要进行其他高负载操作
- 可以调整配置文件中的 `cpu_workers` 参数

### Q: 可以暂停处理吗？

**A**: 可以。点击"暂停"按钮：
- 程序会完成当前帧后暂停
- 可以随时恢复
- 关闭程序后重新打开，会自动恢复队列

注意：暂停不会释放显存，只是停止处理。

---

## 功能相关

### Q: 补帧功能是什么？

**A**: 补帧（Frame Interpolation）是将低帧率视频转换为高帧率的技术：
- 输入: 24fps 或 30fps
- 输出: 60fps
- 原理: AI 在两帧之间生成中间帧

**适用场景**:
- 电影转 60fps 更流畅
- 动画视频补帧
- 慢动作效果

**不适用场景**:
- 已有 60fps 的视频
- 高度压缩的视频
- 包含大量文字/字幕的画面

### Q: 三种档位有什么区别？

**A**: 

**流畅档 (Fast)**:
- 分辨率: 720p 或 1080p
- 超分倍数: 2x
- 显存需求: ~2GB
- 速度: 快
- 适用: 快速预览或硬件有限

**标准档 (Standard)**:
- 分辨率: 1080p 60fps
- 超分倍数: 4x
- 显存需求: ~4GB
- 速度: 中等
- 适用: 日常观看

**高清档 (Quality)**:
- 分辨率: 4K 60fps
- 超分倍数: 4x
- 显存需求: ~6GB
- 速度: 慢
- 适用: 高质量存档

### Q: 可以自定义输出分辨率吗？

**A**: 目前不支持直接自定义分辨率，但可以通过选择不同档位间接控制：
- 原视频 480p + 标准档 = 1080p 输出
- 原视频 720p + 标准档 = 1440p 输出
- 原视频 1080p + 标准档 = 4K 输出

未来版本可能支持自定义参数。

### Q: 支持批量处理吗？

**A**: 支持：
- 拖放多个文件
- 点击添加文件多次
- 程序会按顺序处理

**限制**:
- 批量处理是串行的，不是并行
- 队列最多支持 50 个视频
- 处理中会占用较多磁盘空间

### Q: 会保留原视频的音频吗？

**A**: 会。程序会自动：
- 提取原视频的音频
- 使用 FFmpeg 无损转码（如果需要）
- 将音频合并到输出视频

音频格式支持：AAC, MP3, AC3, FLAC 等。

---

## 技术相关

### Q: 使用的是什么 AI 模型？

**A**: 使用两个模型：

1. **Real-ESRGAN**: 超分模型
   - 基于 Real-ESRGAN 论文实现
   - 支持 2x 和 4x 超分
   - 使用 tile 分块处理大分辨率

2. **RIFE**: 补帧模型
   - 基于 RIFE 论文实现
   - 轻量级版本，速度快
   - 支持任意帧率倍数

### Q: 可以在 Mac 上运行吗？

**A**: 目前不支持。原因：
- 依赖 CUDA (NVIDIA 专有技术)
- PyQt6 在不同平台的差异
- 目前没有 Metal 后端支持

**替代方案**:
- 使用 Intel Mac + 外置 NVIDIA 显卡
- 使用远程 Windows 机器
- 等待未来版本添加 Metal 支持

### Q: 为什么需要 FFmpeg？

**A**: FFmpeg 是必需依赖，用于：
- 视频解码（提取帧）
- 视频编码（合成输出）
- 音频处理
- 格式转换

FFmpeg 安装教程：[FFmpeg 官网](https://ffmpeg.org/download.html)

### Q: 模型文件在哪里？

**A**: 模型文件位置：

```
Windows:
  C:\Users\<用户名>\.video-upscaler\models\
  或程序安装目录\models\

模型文件:
  - RealESRGAN_x4plus.pth (64MB)
  - RealESRGAN_x2plus.pth (32MB)
  - RealESRGAN_animevideov3.pth (18MB)
```

首次启动会自动下载。

### Q: 支持命令行调用吗？

**A**: 基础支持：

```bash
# 单文件处理
VideoUpscaler.exe --input "input.mp4" --preset "标准" --output "output.mp4"

# 批量处理
VideoUpscaler.exe --batch "folder/*.mp4" --preset "高清"

# 查看帮助
VideoUpscaler.exe --help
```

高级功能（队列管理、暂停/恢复）需要通过 GUI。

---

## 故障相关

### Q: 出现 "CUDA out of memory" 怎么办？

**A**: 显存不足的错误，解决方案：

1. **降低档位**:
   - 从"高清"改为"标准"
   - 从"标准"改为"流畅"

2. **关闭补帧**:
   - 取消勾选"启用补帧"

3. **减小 tile 大小**:
   - 编辑配置文件：`tile_size: 256`

4. **关闭其他程序**:
   - 释放显存

5. **升级硬件**:
   - 增加显存或更换显卡

### Q: 程序无响应怎么办？

**A**: 

**步骤 1**: 等待
- 某些大文件处理可能需要几分钟
- 不要立即强制关闭

**步骤 2**: 检查资源
- 打开任务管理器
- 查看 CPU/GPU/内存占用
- 如果持续 100%，可能是正常处理中

**步骤 3**: 强制重启
- 如果超过 10 分钟无响应
- 强制关闭后重新打开
- 队列会自动恢复

**步骤 4**: 查看日志
- 日志位置：`%APPDATA%\VideoUpscaler\logs\`
- 查找错误信息

### Q: 输出视频黑屏怎么办？

**A**: 可能原因和解决方案：

1. **编码器不支持**:
   - 尝试更换档位
   - 检查显卡是否支持 NVENC

2. **FFmpeg 问题**:
   - 更新 FFmpeg 到最新版本
   - 检查 FFmpeg 是否正确安装

3. **模型损坏**:
   - 重新下载模型文件
   - 运行 `python scripts/download_models.py`

4. **权限问题**:
   - 以管理员身份运行程序
   - 检查输出目录的写入权限

### Q: 如何处理损坏的视频文件？

**A**: 损坏视频可能无法处理。尝试：

1. **修复视频**:
   ```bash
   ffmpeg -i corrupted.mp4 -c copy fixed.mp4
   ```

2. **提取关键帧**:
   - 使用 FFmpeg 的 `-discard nokey` 选项

3. **跳过损坏部分**:
   - 使用 FFmpeg 的 `-ss` 和 `-t` 选项裁剪

4. **更换源文件**:
   - 使用其他来源的同一视频

### Q: 日志文件在哪里？

**A**: 

```
Windows:
  %APPDATA%\VideoUpscaler\logs\app.log
  %APPDATA%\VideoUpscaler\logs\error.log

或程序目录:
  VideoUpscaler\logs\
```

提交 bug 时请附带日志文件。

---

## 授权相关

### Q: 是免费软件吗？

**A**: 是的，Video Upscaler 是免费开源软件：
- **开源**: 代码在 GitHub 上公开
- **免费**: 不收取任何费用
- **自由**: 可以自由使用、修改、分发

**许可证**: GPL-3.0

### Q: 可以用于商业用途吗？

**A**: 可以，但有条件：
- 必须遵守 GPL-3.0 许可证
- 如果修改了代码，必须开源
- 需要保留版权声明

详细请阅读 LICENSE 文件。

### Q: 可以重新分发吗？

**A**: 可以，要求：
- 保留原始版权声明
- 提供源代码或源代码获取方式
- 使用 GPL-3.0 许可证

### Q: 如何贡献代码？

**A**: 

1. **Fork 仓库**:
   ```bash
   git clone https://github.com/ch-1105/video-upscaler.git
   ```

2. **创建分支**:
   ```bash
   git checkout -b feature/my-feature
   ```

3. **提交更改**:
   ```bash
   git add .
   git commit -m "Add feature"
   ```

4. **Push 并创建 PR**:
   ```bash
   git push origin feature/my-feature
   ```

5. **等待审核**

### Q: 如何报告 Bug？

**A**: 

**GitHub Issues**:
- 访问: https://github.com/ch-1105/video-upscaler/issues
- 点击 "New Issue"
- 使用提供的模板

**邮件**:
- 发送至: support@example.com
- 包含详细描述和日志

**内容要求**:
- 程序版本
- Windows 版本
- 显卡型号
- 复现步骤
- 错误信息
- 日志文件

---

## 其他问题

### Q: 有移动端版本吗？

**A**: 没有。原因：
- 需要高性能 GPU
- 移动端显存不足
- PyQt6 不支持移动端

### Q: 会支持 AMD 显卡吗？

**A**: 计划中但优先级不高。目前：
- 代码架构支持 ROCm 后端
- 需要 AMD GPU 的 CUDA 等效方案
- 需要社区贡献代码

### Q: 未来有什么计划？

**A**: 路线图：

**v1.1**:
- 性能优化
- 更多预设
- 批处理改进

**v1.2**:
- 命令行工具增强
- 配置文件编辑
- 多语言支持

**v2.0**:
- AMD 显卡支持
- 云端处理选项
- 插件系统

### Q: 如何联系开发者？

**A**: 

- **GitHub**: @ch-1105
- **邮箱**: ch-1105@example.com
- **QQ群**: 123456789 (非官方)

---

**最后更新**: 2026年2月

**如果问题没有解答？**

请提交 [GitHub Issue](https://github.com/ch-1105/video-upscaler/issues/new) 或发送邮件。
